<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="pandoc">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="This book will teach you how to program in R, with hands-on examples. I wrote it for non-programmers to provide a friendly introduction to the R language. You’ll learn how to load data, assemble and disassemble data objects, navigate R’s environment system, write your own functions, and use all of R’s programming tools. Throughout the book, you’ll use your newfound skills to solve practical data science problems.">
<title>Hands-On Programming with R – 5&nbsp; Modifying Values</title>
<style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007ba5; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #007ba5; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #007ba5; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
<!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]--><script src="site_libs/quarto-nav/quarto-nav.js"></script><script src="site_libs/quarto-nav/headroom.min.js"></script><meta name="quarto:offset" content=".">
<script src="site_libs/quarto-search/autocomplete.min.js"></script><script src="site_libs/quarto-search/fuse.min.js"></script><script src="site_libs/quarto-search/quarto-search.js"></script><script src="site_libs/quarto-html/quarto.js"></script><script src="site_libs/quarto-html/popper.min.js"></script><script src="site_libs/quarto-html/tippy.umd.min.js"></script><script src="site_libs/quarto-html/clipboard.min.js"></script><script src="site_libs/quarto-html/anchor.min.js"></script><script src="site_libs/quarto-html/quarto-html.js"></script><link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="site_libs/bootstrap/bootstrap.min.js"></script><link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<style type="text/css">
    .quarto-layout-panel > figure > figcaption,
    .quarto-layout-panel > .panel-caption {
      margin-top: 10pt;
    }
    .quarto-layout-row {
      display: flex;
      align-items: flex-start;
    }
    .quarto-layout-valign-top {
      align-items: flex-start;
    }
    .quarto-layout-valign-bottom {
      align-items: flex-end;
    }
    .quarto-layout-valign-center {
      align-items: center;
    }
    .quarto-layout-cell {
      position: relative;
      margin-right: 20px;
    }
    .quarto-layout-cell:last-child {
      margin-right: 0;
    }
    .quarto-layout-cell figure,
    .quarto-layout-cell > p {
      margin: 0.2em;
    }
    .quarto-layout-cell img {
      max-width: 100%;
    }
    .quarto-layout-cell .html-widget {
      width: 100% !important;
    }
    .quarto-layout-cell div figure p {
      margin: 0;
    }
    .quarto-layout-cell figure {
      display: inline-block;
      margin-inline-start: 0;
      margin-inline-end: 0;
    }
    .quarto-layout-cell table {
       display: inline-table;
    }
    .quarto-layout-cell-subref figcaption {
      font-style: italic;
    }
    .quarto-figure {
      position: relative;
    }
    .quarto-figure > figure {
      width: 100%;
    }
    .quarto-figure-left > figure > p {
     text-align: left;
    }
    .quarto-figure-center > figure > p {
      text-align: center;
    }
    .quarto-figure-right > figure > p {
      text-align: right;
    }
    figure > p:empty {
      display: none;
    }
    figure > p:first-child {
      margin-top: 0;
      margin-bottom: 0;
    }
    figure > figcaption {
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
<div id="quarto-search-results"></div>
<header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav py-2 d-lg-none d-md-block " data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
    <h1 class="quarto-secondary-nav-title mb-0 fs-3 d-inline">5&nbsp; Modifying Values</h1>
    <button type="button" class="quarto-btn-toggle btn d-lg-none py-0 px-1 d-inline-block border-0 ">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</nav></header><!-- /navbar/sidebar --><div class="container-fluid quarto-container d-flex flex-column" id="quarto-content">
<div class="row flex-fill">
  <div id="quarto-sidebar" class="col col-12 col-lg-3 d-lg-flex px-0 pt-0 sidebar collapse sidebar-navigation">
    <nav class="ms-lg-auto py-2 floating  overflow-scroll "><div class="px-3 pt-lg-2 text-left">
    <div class="sidebar-title mt-1 mb-0 py-0">
      Hands-On Programming with R
        <div class="sidebar-tools-main mt-1">
    <a href="https://github.com/jjallaire/hopr/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item" href="http://www.twitter.com/share">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="https://www.facebook.com/sharer/sharer.php">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="https://www.linkedin.com/sharing/share-offsite/?url=">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
  </div>
    <div class="d-flex px-3 mt-2">
      <div class="sidebar-search flex-fill">
      <form class="d-flex mb-0">
  <input id="quarto-search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      </div>
        <div class="sidebar-tools-collapse mt-1">
    <a href="https://github.com/jjallaire/hopr/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item" href="http://www.twitter.com/share">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="https://www.facebook.com/sharer/sharer.php">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="https://www.linkedin.com/sharing/share-offsite/?url=">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
  <div class="sidebar-menu-container"> 
  <ul class="list-unstyled mt-3 px-3">
<li class="sidebar-item">
  <a href="./index.html" class="">Welcome</a>
</li>
      <li class="sidebar-item">
  <a href="./preface.html" class="">Preface</a>
</li>
      <ul class="list-unstyled sidebar-section depth1">
<li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./dice.html" class="">Project 1: Weighted Dice</a>
            </div>
            <button class="btn text-start  " data-bs-toggle="collapse" data-bs-target="#project1weighteddice-collapse" aria-expanded=" true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </button>
            </div>
        </div>
      <div class="collapse  show" id="project1weighteddice-collapse">
        <ul class="list-unstyled sidebar-item-contents">
<li class="sidebar-item">
  <a href="./basics.html" class=""><span class="chapter-number">1</span>&nbsp; The Very Basics</a>
</li>
          <li class="sidebar-item">
  <a href="./packages.html" class=""><span class="chapter-number">2</span>&nbsp; Packages and Help Pages</a>
</li>
        </ul>
</div>
    </li>
  </ul>
<ul class="list-unstyled sidebar-section depth1">
<li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./cards.html" class="">Project 2: Playing Cards</a>
            </div>
            <button class="btn text-start  " data-bs-toggle="collapse" data-bs-target="#project2playingcards-collapse" aria-expanded=" true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </button>
            </div>
        </div>
      <div class="collapse  show" id="project2playingcards-collapse">
        <ul class="list-unstyled sidebar-item-contents">
<li class="sidebar-item">
  <a href="./objects.html" class=""><span class="chapter-number">3</span>&nbsp; R Objects</a>
</li>
          <li class="sidebar-item">
  <a href="./notation.html" class=""><span class="chapter-number">4</span>&nbsp; R Notation</a>
</li>
          <li class="sidebar-item">
  <a href="./modifying.html" class="active"><span class="chapter-number">5</span>&nbsp; Modifying Values</a>
</li>
          <li class="sidebar-item">
  <a href="./environments.html" class=""><span class="chapter-number">6</span>&nbsp; Environments</a>
</li>
        </ul>
</div>
    </li>
  </ul>
<ul class="list-unstyled sidebar-section depth1">
<li class="">
        <div class="me-auto ">
          <div class="d-inline-flex w-100 sidebar-section-item">
            <div class="sidebar-section-link me-auto ">
            <a href="./slots.html" class="">Project 3: Slot Machine</a>
            </div>
            <button class="btn text-start  " data-bs-toggle="collapse" data-bs-target="#project3slotmachine-collapse" aria-expanded=" true">
              <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </button>
            </div>
        </div>
      <div class="collapse  show" id="project3slotmachine-collapse">
        <ul class="list-unstyled sidebar-item-contents">
<li class="sidebar-item">
  <a href="./programs.html" class=""><span class="chapter-number">7</span>&nbsp; Programs</a>
</li>
          <li class="sidebar-item">
  <a href="./s3.html" class=""><span class="chapter-number">8</span>&nbsp; S3</a>
</li>
          <li class="sidebar-item">
  <a href="./loops.html" class=""><span class="chapter-number">9</span>&nbsp; Loops</a>
</li>
          <li class="sidebar-item">
  <a href="./speed.html" class=""><span class="chapter-number">10</span>&nbsp; Speed</a>
</li>
        </ul>
</div>
    </li>
  </ul>
<ul class="list-unstyled sidebar-section depth1">
<li class="">
        <div class="me-auto ">
            <button class="btn sidebar-section-item d-inline-flex text-start w-100 " data-bs-toggle="collapse" data-bs-target="#appendices-collapse" aria-expanded=" true">
              <div class="me-auto  sidebar-section-item">
                Appendices
              </div>
            <div><i class="bi bi-chevron-right ms-2 "></i></div>
            </button>
        </div>
      <div class="collapse  show" id="appendices-collapse">
        <ul class="list-unstyled sidebar-item-contents">
<li class="sidebar-item">
  <a href="./a1-starting.html" class=""><span class="chapter-number">A</span>&nbsp; Installing R and RStudio</a>
</li>
          <li class="sidebar-item">
  <a href="./a2-packages.html" class=""><span class="chapter-number">B</span>&nbsp; R Packages</a>
</li>
          <li class="sidebar-item">
  <a href="./a3-updating.html" class=""><span class="chapter-number">C</span>&nbsp; Updating R and Its Packages</a>
</li>
          <li class="sidebar-item">
  <a href="./a4-data.html" class=""><span class="chapter-number">D</span>&nbsp; Loading and Saving Data in R</a>
</li>
          <li class="sidebar-item">
  <a href="./a5-debug.html" class=""><span class="chapter-number">E</span>&nbsp; Debugging R Code</a>
</li>
        </ul>
</div>
    </li>
  </ul>
</ul>
</div>
</nav>
</div>
  <div id="quarto-toc-sidebar" class="col col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-toc order-last"><nav id="TOC" role="doc-toc"><h2 id="toc-title">On this page</h2>
<ul>
<li><a href="#changing-values-in-place" class="nav-link active" data-scroll-target="#changing-values-in-place"> <span class="header-section-number">5.1</span> Changing Values in Place</a></li>
<li>
<a href="#logical-subsetting" class="nav-link" data-scroll-target="#logical-subsetting"> <span class="header-section-number">5.2</span> Logical Subsetting</a>
<ul class="collapse">
<li><a href="#logical-tests" class="nav-link" data-scroll-target="#logical-tests"> <span class="header-section-number">5.2.1</span> Logical Tests</a></li>
<li><a href="#boolean-operators" class="nav-link" data-scroll-target="#boolean-operators"> <span class="header-section-number">5.2.2</span> Boolean Operators</a></li>
</ul>
</li>
<li>
<a href="#sec:missing" class="nav-link" data-scroll-target="#sec\:missing"> <span class="header-section-number">5.3</span> Missing Information</a>
<ul class="collapse">
<li><a href="#na.rm" class="nav-link" data-scroll-target="#na.rm"> <span class="header-section-number">5.3.1</span> na.rm</a></li>
<li><a href="#is.na" class="nav-link" data-scroll-target="#is.na"> <span class="header-section-number">5.3.2</span> is.na</a></li>
</ul>
</li>
<li><a href="#summary" class="nav-link" data-scroll-target="#summary"> <span class="header-section-number">5.4</span> Summary</a></li>
</ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jjallaire/hopr/edit/master/modifying.Rmd">Edit this page</a></p></div></div></nav></div>
  <div class="col mx-auto col-sm-12 col-md-9 col-lg-7 px-lg-4">
<main><header id="title-block-header"><h1 class="title d-none d-lg-block display-7">5&nbsp; Modifying Values</h1>
</header><p>Are you ready to play some games with your virtual deck? Not so fast! The point system in your deck of cards doesn’t align well with many card games. For example, in war and poker, aces are usually scored higher than kings. They’d have a point value of 14, not 1.</p>
<p>In this task, you will change the point system of your deck three times to match three different games: war, hearts, and blackjack. Each of these games will teach you something different about modifying the values inside of a data set. Start by making a copy of <code>deck</code> that you can manipulate. This will ensure that you always have a pristine copy of <code>deck</code> to fall back on (should things go awry):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span> <span class="op">&lt;-</span> <span class="va">deck</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" id="changing-values-in-place">
<span class="header-section-number">5.1</span> Changing Values in Place</h2>
<p>You can use R’s notation system to modify values within an R object. First, describe the value (or values) you wish to modify. Then use the assignment operator <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> to overwrite those values. R will update the selected values <em>in the original object</em>. Let’s put this into action with a real example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>
<span class="va">vec</span>
<span class="co">##  0 0 0 0 0 0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here’s how you can select the first value of <code>vec</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">vec</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="co">##  0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And here is how you can modify it:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">vec</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1000</span>
<span class="va">vec</span>
<span class="co">## 1000    0    0    0    0    0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can replace multiple values at once as long as the number of new values equals the number of selected values:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">vec</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">vec</span>
<span class="co">##  1 0 1 0 1 0</span>

<span class="va">vec</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">vec</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="op">+</span> <span class="fl">1</span>
<span class="va">vec</span>
<span class="co">## 1 0 1 1 2 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also create values that do not yet exist in your object. R will expand the object to accommodate the new values:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">vec</span><span class="op">[</span><span class="fl">7</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="va">vec</span>
<span class="co">## 1 0 1 1 2 1 0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This provides a great way to add new variables to your data set:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">$</span><span class="va">new</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">52</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck2</span><span class="op">)</span>
<span class="co">##   face   suit value new</span>
<span class="co">##   king spades    13   1</span>
<span class="co">##  queen spades    12   2</span>
<span class="co">##   jack spades    11   3</span>
<span class="co">##    ten spades    10   4</span>
<span class="co">##   nine spades     9   5</span>
<span class="co">##  eight spades     8   6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also remove columns from a data frame (and elements from a list) by assigning them the symbol <code>NULL</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">$</span><span class="va">new</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck2</span><span class="op">)</span>
<span class="co">##   face   suit value</span>
<span class="co">##   king spades    13</span>
<span class="co">##  queen spades    12</span>
<span class="co">##   jack spades    11</span>
<span class="co">##    ten spades    10</span>
<span class="co">##   nine spades     9</span>
<span class="co">##  eight spades     8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In the game of war, aces are king (figuratively speaking). They receive the highest value of all the cards, which would be something like 14. Every other card gets the value that it already has in <code>deck</code>. To play war, you just need to change the values of your aces from 1 to 14.</p>
<p>As long as you haven’t shuffled your deck, you know just where the aces are. They appear every 13 cards. Hence, you can describe them with R’s notation system:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">26</span>, <span class="fl">39</span>, <span class="fl">52</span><span class="op">)</span>, <span class="op">]</span>
<span class="co">##  face     suit value</span>
<span class="co">##   ace   spades     1</span>
<span class="co">##   ace    clubs     1</span>
<span class="co">##   ace diamonds     1</span>
<span class="co">##   ace   hearts     1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can single out just the <em>values</em> of the aces by subsetting the columns dimension of <code>deck2</code>. Or, even better, you can subset the column vector <code>deck2$value</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">26</span>, <span class="fl">39</span>, <span class="fl">52</span><span class="op">)</span>, <span class="fl">3</span><span class="op">]</span>
<span class="co">## 1 1 1 1</span>

<span class="va">deck2</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">26</span>, <span class="fl">39</span>, <span class="fl">52</span><span class="op">)</span><span class="op">]</span>
<span class="co">## 1 1 1 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now all you have to do is assign a new set of values to these old values. The set of new values will have to be the same size as the set of values that you are replacing. So you could save <code><a href="https://rdrr.io/r/base/c.html">c(14, 14, 14, 14)</a></code> into the ace values, or you could just save <em><code>14</code></em> and rely on R’s recycling rules to expand <code>14</code> to <code><a href="https://rdrr.io/r/base/c.html">c(14, 14, 14, 14)</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">26</span>, <span class="fl">39</span>, <span class="fl">52</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">14</span>, <span class="fl">14</span>, <span class="fl">14</span><span class="op">)</span>

<span class="co"># or</span>

<span class="va">deck2</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">26</span>, <span class="fl">39</span>, <span class="fl">52</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">14</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that the values change <em>in place</em>. You don’t end up with a modified <em>copy</em> of <code>deck2</code>; the new values will appear inside <code>deck2</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck2</span>, <span class="fl">13</span><span class="op">)</span>
<span class="co">##   face   suit value</span>
<span class="co">##   king spades    13</span>
<span class="co">##  queen spades    12</span>
<span class="co">##   jack spades    11</span>
<span class="co">##    ten spades    10</span>
<span class="co">##   nine spades     9</span>
<span class="co">##  eight spades     8</span>
<span class="co">##  seven spades     7</span>
<span class="co">##    six spades     6</span>
<span class="co">##   five spades     5</span>
<span class="co">##   four spades     4</span>
<span class="co">##  three spades     3</span>
<span class="co">##    two spades     2</span>
<span class="co">##    ace spades    14</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The same technique will work whether you store your data in a vector, matrix, array, list, or data frame. Just describe the values that you want to change with R’s notation system, then assign over those values with R’s assignment operator.</p>
<p>Things worked very easily in this example because you knew exactly where each ace was. The cards were sorted in an orderly manner and an ace appeared every 13 rows.</p>
<p>But what if the deck had been shuffled? You could look through all the cards and note the locations of the aces, but that would be tedious. If your data frame were larger, it might be impossible:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck3</span> <span class="op">&lt;-</span> <span class="fu">shuffle</span><span class="op">(</span><span class="va">deck</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where are the aces now?</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck3</span><span class="op">)</span>
<span class="co">##  face     suit value</span>
<span class="co">## queen    clubs    12</span>
<span class="co">##  king    clubs    13</span>
<span class="co">##   ace   spades     1   # an ace</span>
<span class="co">##  nine    clubs     9</span>
<span class="co">## seven   spades     7</span>
<span class="co">## queen diamonds    12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Why not ask R to find the aces for you? You can do this with logical subsetting. Logical subsetting provides a way to do targeted extraction and modification with R objects, a sort of search-and-destroy mission inside your own data sets.</p>
</section><section class="level2" data-number="5.2"><h2 data-number="5.2" class="anchored" id="logical-subsetting">
<span class="header-section-number">5.2</span> Logical Subsetting</h2>
<p>Do you remember R’s logical index system, <a href="objects.html#sec:logicals">logicals</a>? To recap, you can select values with a vector of <code>TRUE</code>s and <code>FALSE</code>s. The vector must be the same length as the dimension that you wish to subset. R will return every element that matches a TRUE:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">vec</span>
<span class="co">## 1 0 1 1 2 1 0</span>

<span class="va">vec</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">]</span>
<span class="co">## 2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>At first glance, this system might seem impractical. Who wants to type out long vectors of TRUEs and FALSEs? No one. But you don’t have to. You can let a logical test create a vector of TRUEs and FALSEs for you.</p>
<section class="level3" data-number="5.2.1"><h3 data-number="5.2.1" class="anchored" id="logical-tests">
<span class="header-section-number">5.2.1</span> Logical Tests</h3>
<p>A logical test is a comparison like “is one less than two?”, <code>1 &lt; 2</code>, or “is three greater than four?”, <code>3 &gt; 4</code>. R provides seven logical operators that you can use to make comparisons, shown in <a href="#tbl:logop">tbl.&nbsp;<span>5.1</span></a>.</p>
<div id="tbl:logop" class="anchored">
<table class="table">
<caption>Table 5.1: R’s Logical Operators </caption>
<thead><tr class="header">
<th>Operator</th>
<th>Syntax</th>
<th>Tests</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code></td>
<td><code>a &gt; b</code></td>
<td>Is a greater than b?</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code></td>
<td><code>a &gt;= b</code></td>
<td>Is a greater than or equal to b?</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;</a></code></td>
<td><code>a &lt; b</code></td>
<td>Is a less than b?</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code></td>
<td><code>a &lt;= b</code></td>
<td>Is a less than or equal to b?</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code></td>
<td><code>a == b</code></td>
<td>Is a equal to b?</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code></td>
<td><code>a != b</code></td>
<td>Is a not equal to b?</td>
</tr>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/match.html">%in%</a></code></td>
<td><code>a %in% c(a, b, c)</code></td>
<td>Is a in the group c(a, b, c)?</td>
</tr>
</tbody>
</table>
</div>
<p>Each operator returns a <code>TRUE</code> or a <code>FALSE</code>. If you use an operator to compare vectors, R will do element-wise comparisons—just like it does with the arithmetic operators:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">2</span>
<span class="co">## FALSE</span>

<span class="fl">1</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>
<span class="co">## TRUE FALSE FALSE</span>

<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>
<span class="co">## FALSE  TRUE FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> is the only operator that does not do normal element-wise execution. <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> tests whether the value(s) on the left side are in the vector on the right side. If you provide a vector on the left side, <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> will <em>not</em> pair up the values on the left with the values on the right and then do element-wise tests. Instead, <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> will independently test whether each value on the left is <em>somewhere</em> in the vector on the right:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fl">1</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">## FALSE</span>

<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">## FALSE FALSE</span>

<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">## FALSE FALSE  TRUE</span>

<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">## FALSE FALSE  TRUE  TRUE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that you test for equality with a double equals sign, <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code>, and not a single equals sign, <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>, which is another way to write <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>. It is easy to forget and use <code>a = b</code> to test if <code>a</code> equals <code>b</code>. Unfortunately, you’ll be in for a nasty surprise. R won’t return a <code>TRUE</code> or <code>FALSE</code>, because it won’t have to: <code>a</code> <em>will</em> equal <code>b</code>, because you just ran the equivalent of <code>a &lt;- b</code>.</p>
<div class="callout-warning callout callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="flex-fill">
<code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> is an assignment operator
</div>
</div>
<div class="callout-body">
<p>Be careful not to confuse <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> with <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code>. <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> does the same thing as <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>: it assigns a value to an object.</p>
</div>
</div>
<p>You can compare any two R objects with a logical operator; however, logical operators make the most sense if you compare two objects of the same data type. If you compare objects of different data types, R will use its coercion rules to coerce the objects to the same type before it makes the comparison.</p>
<div class="callout callout no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="flex-fill">
Exercise: How many Aces?
</div>
</div>
<div class="callout-body">
<p>Extract the <code>face</code> column of <code>deck2</code> and test whether each value is equal to <code>ace</code>. As a challenge, use R to quickly count how many cards are equal to <code>ace</code>.</p>
</div>
</div>
<p>You can extract the <code>face</code> column with R’s <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> notation:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">$</span><span class="va">face</span>
<span class="co">##  "king"  "queen" "jack"  "ten"   "nine" </span>
<span class="co">##  "eight" "seven" "six"   "five"  "four" </span>
<span class="co">##  "three" "two"   "ace"   "king"  "queen"</span>
<span class="co">##  "jack"  "ten"   "nine"  "eight" "seven"</span>
<span class="co">##  "six"   "five"  "four"  "three" "two"  </span>
<span class="co">##  "ace"   "king"  "queen" "jack"  "ten"  </span>
<span class="co">##  "nine"  "eight" "seven" "six"   "five" </span>
<span class="co">##  "four"  "three" "two"   "ace"   "king" </span>
<span class="co">##  "queen" "jack"  "ten"   "nine"  "eight"</span>
<span class="co">##  "seven" "six"   "five"  "four"  "three"</span>
<span class="co">##  "two"   "ace"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, you can use the <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code> operator to test whether each value is equal to <code>ace</code>. In the following code, R will use its recycling rules to indivuidually compare every value of <code>deck2$face</code> to <code>"ace"</code>. Notice that the quotation marks are important. If you leave them out, R will try to find an object named <code>ace</code> to compare against <code>deck2$face</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck2</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"ace"</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE  TRUE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE  TRUE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can use <code>sum</code> to quickly count the number of <code>TRUE</code>s in the previous vector. Remember that R will coerce logicals to numerics when you do math with them. R will turn <code>TRUE</code>s into ones and <code>FALSE</code>s into zeroes. As a result, sum will count the number of <code>TRUE</code>s:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">deck2</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"ace"</span><span class="op">)</span>
<span class="co">## 4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can use this method to spot and then change the aces in your deck—even if you’ve shuffled your cards. First, build a logical test that identifies the aces in your shuffled deck:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck3</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"ace"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then use the test to single out the ace point values. Since the test returns a logical vector, you can use it as an index:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck3</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">deck3</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"ace"</span><span class="op">]</span>
<span class="co">##  1 1 1 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, use assignment to change the ace values in <code>deck3</code>:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck3</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">deck3</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"ace"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">14</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck3</span><span class="op">)</span>
<span class="co">##  face     suit value</span>
<span class="co">## queen    clubs    12</span>
<span class="co">##  king    clubs    13</span>
<span class="co">##   ace   spades    14  # an ace</span>
<span class="co">##  nine    clubs     9</span>
<span class="co">## seven   spades     7</span>
<span class="co">## queen diamonds    12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To summarize, you can use a logical test to select values within an object.</p>
<p>Logical subsetting is a powerful technique because it lets you quickly identify, extract, and modify individual values in your data set. When you work with logical subsetting, you do not need to know <em>where</em> in your data set a value exists. You only need to know how to describe the value with a logical test.</p>
<p>Logical subsetting is one of the things R does best. In fact, logical subsetting is a key component of vectorized programming, a coding style that lets you write fast and efficient R code, which we will study in <a href="speed.html">Speed</a>.</p>
<p>Let’s put logical subsetting to use with a new game: hearts. In hearts, every card has a value of zero:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span> <span class="op">&lt;-</span> <span class="va">deck</span>
<span class="va">deck4</span><span class="op">$</span><span class="va">value</span> <span class="op">&lt;-</span> <span class="fl">0</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck4</span>, <span class="fl">13</span><span class="op">)</span>
<span class="co">##   face   suit value</span>
<span class="co">##   king spades     0</span>
<span class="co">##  queen spades     0</span>
<span class="co">##   jack spades     0</span>
<span class="co">##    ten spades     0</span>
<span class="co">##   nine spades     0</span>
<span class="co">##  eight spades     0</span>
<span class="co">##  seven spades     0</span>
<span class="co">##    six spades     0</span>
<span class="co">##   five spades     0</span>
<span class="co">##   four spades     0</span>
<span class="co">##  three spades     0</span>
<span class="co">##    two spades     0</span>
<span class="co">##    ace spades     0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>except cards in the suit of hearts and the queen of spades. Each card in the suit of hearts has a value of 1. Can you find these cards and replace their values? Give it a try.</p>
<div class="callout callout no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="flex-fill">
Exercise: Score the Deck for Hearts
</div>
</div>
<div class="callout-body">
<p>Assign a value of <code>1</code> to every card in <code>deck4</code> that has a suit of hearts.</p>
</div>
</div>
<p>To do this, first write a test that identifies cards in the <code>hearts</code> suit:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"hearts"</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE</span>
<span class="co">##   TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span>
<span class="co">##   TRUE  TRUE  TRUE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then use your test to select the values of these cards:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"hearts"</span><span class="op">]</span>
<span class="co">## 0 0 0 0 0 0 0 0 0 0 0 0 0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, assign a new number to these values:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"hearts"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now all of your <code>hearts</code> cards have been updated:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"hearts"</span><span class="op">]</span>
<span class="co">## 1 1 1 1 1 1 1 1 1 1 1 1 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In hearts, the queen of spades has the most unusual value of all: she’s worth 13 points. It should be simple to change her value, but she’s surprisingly hard to find. You could find all of the <em>queens</em>:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">[</span><span class="va">deck4</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"queen"</span>, <span class="op">]</span>
<span class="co">##   face     suit value</span>
<span class="co">##  queen   spades     0</span>
<span class="co">##  queen    clubs     0</span>
<span class="co">##  queen diamonds     0</span>
<span class="co">##  queen   hearts     1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But that’s three cards too many. On the other hand, you could find all of the cards in <em>spades</em>:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">[</span><span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"spades"</span>, <span class="op">]</span>
<span class="co">##   face   suit value</span>
<span class="co">##   king spades     0</span>
<span class="co">##  queen spades     0</span>
<span class="co">##   jack spades     0</span>
<span class="co">##    ten spades     0</span>
<span class="co">##   nine spades     0</span>
<span class="co">##  eight spades     0</span>
<span class="co">##  seven spades     0</span>
<span class="co">##    six spades     0</span>
<span class="co">##   five spades     0</span>
<span class="co">##   four spades     0</span>
<span class="co">##  three spades     0</span>
<span class="co">##    two spades     0</span>
<span class="co">##    ace spades     0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But that’s 12 cards too many. What you really want to find is all of the cards that have both a face value equal to queen and a suit value equal to spades. You can do that with a <em>Boolean operator</em>. Boolean operators combine multiple logical tests together into a single test.</p>
</section><section class="level3" data-number="5.2.2"><h3 data-number="5.2.2" class="anchored" id="boolean-operators">
<span class="header-section-number">5.2.2</span> Boolean Operators</h3>
<p>Boolean operators are things like <em>and</em> (<code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code>) and <em>or</em> (<code><a href="https://rdrr.io/r/base/Logic.html">|</a></code>). They collapse the results of multiple logical tests into a single <code>TRUE</code> or <code>FALSE</code>. R has six boolean operators, shown in <a href="#tbl:boole">tbl.&nbsp;<span>5.2</span></a>.</p>
<div id="tbl:boole" class="anchored">
<table class="table">
<caption>Table 5.2: Boolean operators </caption>
<thead><tr class="header">
<th>Operator</th>
<th>Syntax</th>
<th>Tests</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code></td>
<td><code>cond1 &amp; cond2</code></td>
<td>Are both <code>cond1</code> and <code>cond2</code> true?</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/Logic.html">|</a></code></td>
<td><code>cond1 | cond2</code></td>
<td>Is one or more of <code>cond1</code> and <code>cond2</code> true?</td>
</tr>
<tr class="odd">
<td><code>xor</code></td>
<td><code><a href="https://rdrr.io/r/base/Logic.html">xor(cond1, cond2)</a></code></td>
<td>Is exactly one of <code>cond1</code> and <code>cond2</code> true?</td>
</tr>
<tr class="even">
<td><code><a href="https://rdrr.io/r/base/Logic.html">!</a></code></td>
<td><code>!cond1</code></td>
<td>Is <code>cond1</code> false? (e.g., <code><a href="https://rdrr.io/r/base/Logic.html">!</a></code> flips the results of a logical test)</td>
</tr>
<tr class="odd">
<td><code>any</code></td>
<td><code><a href="https://rdrr.io/r/base/any.html">any(cond1, cond2, cond3, ...)</a></code></td>
<td>Are any of the conditions true?</td>
</tr>
<tr class="even">
<td><code>all</code></td>
<td><code><a href="https://rdrr.io/r/base/all.html">all(cond1, cond2, cond3, ...)</a></code></td>
<td>Are all of the conditions true?</td>
</tr>
</tbody>
</table>
</div>
<p>To use a Boolean operator, place it between two <em>complete</em> logical tests. R will execute each logical test and then use the Boolean operator to combine the results into a single <code>TRUE</code> or <code>FALSE</code>, <a href="#fig:boolean">fig.&nbsp;<span>5.1</span></a>.</p>
<div class="callout-warning callout callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="flex-fill">
The most common mistake with Boolean operators
</div>
</div>
<div class="callout-body">
<p>It is easy to forget to put a complete test on either side of a Boolean operator. In English, it is efficient to say “Is <em>x</em> greater than two and less than nine?” But in R, you need to write the equivalent of “Is <em>x</em> greater than two and <em>is x</em> less than nine?” This is shown in <a href="#fig:boolean">fig.&nbsp;<span>5.1</span></a>.</p>
</div>
</div>
<div id="fig:boolean" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="images/hopr_0501.png" class="img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Figure 5.1: R will evaluate the expressions on each side of a Boolean operator separately, and then combine the results into a single TRUE or FALSE. If you do not supply a complete test to each side of the operator, R will return an error.</figcaption><p></p>
</figure>
</div>
<p>When used with vectors, Boolean operators will follow the same element-wise execution as arithmetic and logical operators:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>

<span class="va">a</span> <span class="op">==</span> <span class="va">b</span>
<span class="co">##  TRUE TRUE TRUE</span>

<span class="va">b</span> <span class="op">==</span> <span class="va">c</span>
<span class="co">##  TRUE  TRUE FALSE</span>

<span class="va">a</span> <span class="op">==</span> <span class="va">b</span> <span class="op">&amp;</span> <span class="va">b</span> <span class="op">==</span> <span class="va">c</span>
<span class="co">##  TRUE  TRUE FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Could you use a Boolean operator to locate the queen of spades in your deck? Of course you can. You want to test each card to see if it is both a queen <em>and</em> a spade. You can write this test in R with:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"queen"</span> <span class="op">&amp;</span> <span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"spades"</span>
<span class="co">##  FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="co">##  FALSE FALSE FALSE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I’ll save the results of this test to its own object. That will make the results easier to work with:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">queenOfSpades</span> <span class="op">&lt;-</span> <span class="va">deck4</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"queen"</span> <span class="op">&amp;</span> <span class="va">deck4</span><span class="op">$</span><span class="va">suit</span> <span class="op">==</span> <span class="st">"spades"</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Next, you can use the test as an index to select the value of the queen of spades. Make sure the test actually selects the correct value:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">[</span><span class="va">queenOfSpades</span>, <span class="op">]</span>
<span class="co">##  face   suit value</span>
<span class="co">## queen spades     0</span>

<span class="va">deck4</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">queenOfSpades</span><span class="op">]</span>
<span class="co">## 0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now that you’ve found the queen of spades, you can update her value:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck4</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">queenOfSpades</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">13</span>

<span class="va">deck4</span><span class="op">[</span><span class="va">queenOfSpades</span>, <span class="op">]</span>
<span class="co">##  face   suit value</span>
<span class="co">## queen spades     13</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Your deck is now ready to play hearts.</p>
<div class="callout callout no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="flex-fill">
Exercise: Practice with Tests
</div>
</div>
<div class="callout-body">
<p>If you think you have the hang of logical tests, try converting these sentences into tests written with R code. To help you out, I’ve defined some R objects after the sentences that you can use to test your answers:</p>
<ul>
<li>Is w positive?</li>
<li>Is x greater than 10 and less than 20?</li>
<li>Is object y the word February?</li>
<li>Is <em>every</em> value in z a day of the week?</li>
</ul>
</div>
</div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">15</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="st">"February"</span>
<span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Friday"</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here are some model answers. If you got stuck, be sure to re-read how R evaluates logical tests that use Boolean values:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">w</span> <span class="op">&gt;</span> <span class="fl">0</span>
<span class="fl">10</span> <span class="op">&lt;</span> <span class="va">x</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;</span> <span class="fl">20</span>
<span class="va">y</span> <span class="op">==</span> <span class="st">"February"</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">z</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Monday"</span>, <span class="st">"Tuesday"</span>, <span class="st">"Wednesday"</span>, <span class="st">"Thursday"</span>, <span class="st">"Friday"</span>, 
  <span class="st">"Saturday"</span>, <span class="st">"Sunday"</span><span class="op">)</span><span class="op">)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s consider one last game, blackjack. In blackjack, each number card has a value equal to its face value. Each face card (king, queen, or jack) has a value of 10. Finally, each ace has a value of 11 or 1, depending on the final results of the game.</p>
<p>Let’s begin with a fresh copy of <code>deck</code>—that way the number cards (<code>two</code> through <code>ten</code>) will start off with the correct value:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck5</span> <span class="op">&lt;-</span> <span class="va">deck</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck5</span>, <span class="fl">13</span><span class="op">)</span>
<span class="co">##   king spades    13</span>
<span class="co">##  queen spades    12</span>
<span class="co">##   jack spades    11</span>
<span class="co">##    ten spades    10</span>
<span class="co">##   nine spades     9</span>
<span class="co">##  eight spades     8</span>
<span class="co">##  seven spades     7</span>
<span class="co">##    six spades     6</span>
<span class="co">##   five spades     5</span>
<span class="co">##   four spades     4</span>
<span class="co">##  three spades     3</span>
<span class="co">##    two spades     2</span>
<span class="co">##    ace spades     1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can change the value of the face cards in one fell swoop with <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code>:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">facecard</span> <span class="op">&lt;-</span> <span class="va">deck5</span><span class="op">$</span><span class="va">face</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"king"</span>, <span class="st">"queen"</span>, <span class="st">"jack"</span><span class="op">)</span>

<span class="va">deck5</span><span class="op">[</span><span class="va">facecard</span>, <span class="op">]</span>
<span class="co">##   face     suit value</span>
<span class="co">##   king   spades    13</span>
<span class="co">##  queen   spades    12</span>
<span class="co">##   jack   spades    11</span>
<span class="co">##   king    clubs    13</span>
<span class="co">##  queen    clubs    12</span>
<span class="co">##   jack    clubs    11</span>
<span class="co">##   king diamonds    13</span>
<span class="co">##  queen diamonds    12</span>
<span class="co">##   jack diamonds    11</span>
<span class="co">##   king   hearts    13</span>
<span class="co">##  queen   hearts    12</span>
<span class="co">##   jack   hearts    11</span>

<span class="va">deck5</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">facecard</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">10</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck5</span>, <span class="fl">13</span><span class="op">)</span>
<span class="co">##   face   suit value</span>
<span class="co">##   king spades    10</span>
<span class="co">##  queen spades    10</span>
<span class="co">##   jack spades    10</span>
<span class="co">##    ten spades    10</span>
<span class="co">##   nine spades     9</span>
<span class="co">##  eight spades     8</span>
<span class="co">##  seven spades     7</span>
<span class="co">##    six spades     6</span>
<span class="co">##   five spades     5</span>
<span class="co">##   four spades     4</span>
<span class="co">##  three spades     3</span>
<span class="co">##    two spades     2</span>
<span class="co">##    ace spades     1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now you just need to fix the ace values—or do you? It is hard to decide what value to give the aces because their exact value will change from hand to hand. At the end of each hand, an ace will equal 11 if the sum of the player’s cards does not exceed 21. Otherwise, the ace will equal 1. The actual value of the ace will depend on the other cards in the player’s hand. This is a case of missing information. At the moment, you do not have enough information to assign a correct point value to the ace cards.</p>
</section></section><section class="level2" data-number="5.3"><h2 data-number="5.3" class="anchored" id="sec:missing">
<span class="header-section-number">5.3</span> Missing Information</h2>
<p>Missing information problems happen frequently in data science. Usually, they are more straightforward: you don’t know a value because the measurement was lost, corrupted, or never taken to begin with. R has a way to help you manage these missing values.</p>
<p>The <code>NA</code> character is a special symbol in R. It stands for “not available” and can be used as a placeholder for missing information. R will treat NA exactly as you should want missing information treated. For example, what result would you expect if you add 1 to a piece of missing information?</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fl">1</span> <span class="op">+</span> <span class="cn">NA</span>
<span class="co">## NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>R will return a second piece of missing information. It would not be correct to say that <code>1 + NA = 1</code> because there is a good chance that the missing quantity is not zero. You do not have enough information to determine the result.</p>
<p>What if you tested whether a piece of missing information is equal to 1?</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="cn">NA</span> <span class="op">==</span> <span class="fl">1</span>
<span class="co">## NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Again, your answer would be something like “I do not know if this is equal to one,” that is, <code>NA</code>. Generally, <code>NA</code>s will propagate whenever you use them in an R operation or function. This can save you from making errors based on missing data.</p>
<section class="level3" data-number="5.3.1"><h3 data-number="5.3.1" class="anchored" id="na.rm">
<span class="header-section-number">5.3.1</span> na.rm</h3>
<p>Missing values can help you work around holes in your data sets, but they can also create some frustrating problems. Suppose, for example, that you’ve collected 1,000 observations and wish to take their average with R’s <code>mean</code> function. If even one of the values is <code>NA</code>, your result will be <code>NA</code>:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span>
<span class="co">## NA  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16</span>
<span class="co">## 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33</span>
<span class="co">## 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50</span>

<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span>
<span class="co">## NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Understandably, you may prefer a different behavior. Most R functions come with the optional argument, <code>na.rm</code>, which stands for <code>NA</code> remove. R will ignore <code>NA</code>s when it evaluates a function if you add the argument <code>na.rm = TRUE</code>:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">## 25.5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section class="level3" data-number="5.3.2"><h3 data-number="5.3.2" class="anchored" id="is.na">
<span class="header-section-number">5.3.2</span> is.na</h3>
<p>On occasion, you may want to identify the <code>NA</code>s in your data set with a logical test, but that too creates a problem. How would you go about it? If something is a missing value, any logical test that uses it will return a missing value, even this test:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="cn">NA</span> <span class="op">==</span> <span class="cn">NA</span>
<span class="co">## NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Which means that tests like this won’t help you find missing values:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">NA</span><span class="op">)</span> <span class="op">==</span> <span class="cn">NA</span>
<span class="co">## NA NA NA NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But don’t worry too hard; R supplies a special function that can test whether a value is an <code>NA</code>. The function is sensibly named <code>is.na</code>:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>
<span class="co">## TRUE</span>

<span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span>
<span class="co">## FALSE FALSE FALSE  TRUE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s set all of your ace values to <code>NA</code>. This will accomplish two things. First, it will remind you that you do not know the final value of each ace. Second, it will prevent you from accidentally scoring a hand that has an ace before you determine the ace’s final value.</p>
<p>You can set your ace values to <code>NA</code> in the same way that you would set them to a number:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r"><code class="sourceCode R"><span class="va">deck5</span><span class="op">$</span><span class="va">value</span><span class="op">[</span><span class="va">deck5</span><span class="op">$</span><span class="va">face</span> <span class="op">==</span> <span class="st">"ace"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">deck5</span>, <span class="fl">13</span><span class="op">)</span>
<span class="co">##   face   suit value</span>
<span class="co">##   king spades    10</span>
<span class="co">##  queen spades    10</span>
<span class="co">##   jack spades    10</span>
<span class="co">##    ten spades    10</span>
<span class="co">##   nine spades     9</span>
<span class="co">##  eight spades     8</span>
<span class="co">##  seven spades     7</span>
<span class="co">##    six spades     6</span>
<span class="co">##   five spades     5</span>
<span class="co">##   four spades     4</span>
<span class="co">##  three spades     3</span>
<span class="co">##    two spades     2</span>
<span class="co">##    ace spades    NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Congratulations. Your deck is now ready for a game of blackjack.</p>
</section></section><section class="level2" data-number="5.4"><h2 data-number="5.4" class="anchored" id="summary">
<span class="header-section-number">5.4</span> Summary</h2>
<p>You can modify values in place inside an R object when you combine R’s notation syntax with the assignment operator, <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>. This lets you update your data and clean your data sets</p>
<p>When you work with large data sets, modifying and retrieving values creates a logistical problem of its own. How can you search through the data to find the values that you want to modify or retrieve? As an R user, you can do this with logical subsetting. Create a logical test with logical and Boolean operators and then use the test as an index in R’s bracket notation. R will return the values that you are looking for, even if you do not know where they are.</p>
<p>Retrieving individual values will not be your only concern as an R programmer. You’ll also need to retrieve entire data sets themselves; for example, you may call one in a function. <a href="environments.html">Environments</a> will teach you how R looks up and saves data sets and other R objects in its environment system. You’ll then use this knowledge to fix the <code>deal</code> and <code>shuffle</code> functions.</p>
<!-- -->
</section></main><div class="page-navigation ">
  <div class="nav-page nav-page-previous">
      <a href="./notation.html">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; R Notation</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./environments.html">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; Environments</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</div>
</div> <!-- /main column -->
</div> <!-- /row -->
</div> <!-- /container fluid -->


</body></html>